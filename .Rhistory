g<-ggplot(data=dat,aes(x=x,y=d))+geom_hist()
g<-ggplot(data=dat,aes(x=x,y=d))+geom_histogram()
g
g<-ggplot(data=dat,aes(x=x))+geom_histogram()
library(ggplot2)
dave<-0.7
carole<-0.6
size<-100
x<-seq(1,size)
dat<-data.frame(x,d=dbinom(x,size,dave),c=dbinom(x,size,carole))
g<-ggplot(data=dat,aes(x=x))+geom_histogram()
g
library(ggplot2)
dave<-0.7
carole<-0.6
size<-100
x<-seq(1,size)
dat<-data.frame(x,d=dbinom(x,size,dave),c=dbinom(x,size,carole))
g<-ggplot(data=dat,aes(x=d))+geom_histogram()
g
library(ggplot2)
dave<-0.7
carole<-0.6
size<-100
x<-seq(1,size)
dat<-data.frame(x,d=dbinom(x,size,dave),c=dbinom(x,size,carole))
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar()
g
library(ggplot2)
dave<-0.7
carole<-0.6
size<-100
x<-seq(1,size)
dat<-data.frame(x,d=dbinom(x,size,dave),c=dbinom(x,size,carole))
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity")
g
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.5))
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.2))
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.2))
g
library(ggplot2)
dave<-0.7
carole<-0.6
size<-100
x<-seq(1,size)
dat<-data.frame(x,d=dbinom(x,size,dave),c=dbinom(x,size,carole))
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4))
g
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4,col="red"))
g
library(ggplot2)
library(openintro)
data(COL)
dave<-0.7
carole<-0.6
size<-100
x<-seq(1,size)
dat<-data.frame(x,d=dbinom(x,size,dave),c=dbinom(x,size,carole))
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4,col = COL[1]))
g
library(ggplot2)
library(openintro)
data(COL)
dave<-0.7
carole<-0.6
size<-100
x<-seq(1,size)
dat<-data.frame(x,d=dbinom(x,size,dave),c=dbinom(x,size,carole))
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4,col = COL[7]))
g
library(ggplot2)
library(openintro)
data(COL)
dave<-0.7
carole<-0.6
size<-100
x<-seq(1,size)
dat<-data.frame(x,d=dbinom(x,size,dave),c=dbinom(x,size,carole))
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4,col = COL[22]))
g
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4,col = COL[1],fill=COL[1]))
g
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4,col = COL[2],fill=COL[2]))
g
g<-ggplot(data=dat,aes(x=x))+geom_bar(stat="bin",aes(width=0.4,col = COL[2],fill=COL[2]))
g
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="bin",aes(width=0.4,col = COL[2],fill=COL[2]))
g
library(ggplot2)
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4,col = COL[2],fill=COL[2]))
g
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4,col = COL[7],fill=COL[7]))
g
?COL()
g<-ggplot(data=dat,aes(x=x,y=d))+geom_bar(stat="identity",aes(width=0.4,colour = COL[7],fill=COL[7]))
g
g<-ggplot(data=dat,aes(x=x,y=d,fill=COL[7]))+geom_bar(stat="identity",aes(width=0.4,colour = COL[7],fill=COL[7]))
g
g<-ggplot(data=dat,aes(x=x,y=d,fill=COL[7]))+geom_bar(stat="identity",aes(width=0.4,colour = COL[7]))
g
g<-ggplot(data=dat,aes(x=x,y=d,fill=COL[7]))+geom_bar(stat="identity",aes(width=0.4,colour = COL[7],alpha=0.5))
g
g<-ggplot(data=dat,aes(x=x,y=d,fill=COL[7]))+geom_bar(stat="identity",aes(width=0.4,colour = COL[7],alpha=0.3))
g
?Rmarkdown
?markdown
knit_engines$set()
?cat
qnorm(-3.7,0,1.7)
pnorm(-3.7,0,1.7)
?swirl
install.packages("swirl")
library(swirl)
ls()
rm(list=ls())
ls()
swirl()
?InstallCourses
install_from_swirl(Getting and Cleaning Data, dev = FALSE, mirror = "github")
install_from_swirl(Getting_and_Cleaning_Data, dev = FALSE, mirror = "github")
SWIRL()
swirl()
7/(200000/10000)
7/(10000/200000)
setwd("H:/Rspace/RE_Community/SolarLab")
main=("daylight time for latitudess 0 to 60n")
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20))
main=("daylight time for latitudess 0 to 60n")
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
# Chunk 1
library(png)
library(grid)
img <- readPNG("figures/solarZenithAngle.png")
grid.raster(img)
# Chunk 2
# declination angle
deltaOdot<-function(t){
# t is the time in day number 1-365
asin(sin(-0.4091)*cos((2*pi/365.24)*(t+10)+0.0334*sin((2*pi/365.24)*(t-2))))
}
# hour angle at sunrise and sunset
h0<-function(phi,t){
acos(tan(phi)*tan(deltaOdot(t)))
}
# cosine of zenith angle
cosTheta<-function(phi,delta,h){
# theta is the zenith angle
sin(phi)*sin(delta)+cos(phi)*cos(delta)*cos(h)
}
solarFlux<-function(S0,phi,t){
h<-pi*(2*(t-floor(t))-1)
delta<-deltaOdot(t)
flux<-S0*cosTheta(phi,delta,h)
flux<-pmax(flux,rep(0,length(t)))
flux
}
# Chunk 3
phi=(pi/180)*50
t=seq(1,365,length.out=365*288)
plot(t,180*deltaOdot(t)/pi,typ="l",ylab="delta")
# Chunk 4
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20))
main=("daylight time for latitudess 0 to 60n")
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
# Chunk 5
day<-180
phi=(pi/180)*0
S0=1368
t=seq(1,366,length.out=365*288)
daybegin<-day*288
dayend<-(day+1)*288
Q<-solarFlux(S0,phi,t)
plot(t[daybegin:dayend],Q[daybegin:dayend],type="l")
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20),main=("daylight time for latitudess 0 to 60n"))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20),main=("daylight time for latitudes 0 to 60N"))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20),xlab=("day of the year"),main=("daylight time for latitudes 0 to 60N"))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20),xlab=("day of the year"),ylab=("daylight time (hours)"),
main=("daylight time for latitudes 0 to 60N"))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20),xlab=("day of the year"),ylab=("daylight time (hours)"),
main=("daylight time for latitudes 0 to 60N"))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
grid(nx = NULL, ny = nx, col = "lightgray", lty = "dotted",
lwd = par("lwd"), equilogs = TRUE)
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20),xlab=("day of the year"),ylab=("daylight time (hours)"),
main=("daylight time for latitudes 0 to 60N"))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
grid(nx = 3, ny = nx, col = "lightgray", lty = "dotted",
lwd = par("lwd"), equilogs = TRUE)
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20),xlab=("day of the year"),ylab=("daylight time (hours)"),
main=("daylight time for latitudes 0 to 60N"))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
grid(3, 3, col = "lightgray", lty = "dotted",
lwd = par("lwd"), equilogs = TRUE)
t=seq(1,365,length.out=360*288)
phi=(pi/180)*0.01
h0s<-h0(phi,t)
plot(t,24*(pi-h0s)/pi,type="l",ylim=c(0,20),xlab=("day of the year"),ylab=("daylight time (hours)"),
main=("daylight time for latitudes 0 to 60N"))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
h0s<-h0(phi,t)
lines(t,24*(pi-h0s)/pi,type="l",col=lat/10)
}
grid(col = "lightgray", lty = "dotted",
lwd = par("lwd"), equilogs = TRUE)
day<-180
phi=(pi/180)*0
S0=1368
t=seq(1,366,length.out=365*288)
daybegin<-day*288
dayend<-(day+1)*288
Q<-solarFlux(S0,phi,t)
plot(t[daybegin:dayend],Q[daybegin:dayend],type="l")
#choose the day
day<-180
# choose the latitude
phi=(pi/180)*0
S0=1368
t=seq(1,366,length.out=365*288)
daybegin<-day*288
dayend<-(day+1)*288
Q<-solarFlux(S0,phi,t)
plot(t[daybegin:dayend],Q[daybegin:dayend],type="l")
for (lat in seq(10,60,10)){
Q<-solarFlux(S0,phi,t)
lines(t[daybegin:dayend],Q[daybegin:dayend],type="l")
}
grid(col = "lightgray", lty = "dotted",
lwd = par("lwd"), equilogs = TRUE)
#choose the day
day<-180
# choose the latitude
phi=(pi/180)*0
S0=1368
t=seq(1,366,length.out=365*288)
daybegin<-day*288
dayend<-(day+1)*288
Q<-solarFlux(S0,phi,t)
plot(t[daybegin:dayend],Q[daybegin:dayend],type="l")
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
Q<-solarFlux(S0,phi,t)
lines(t[daybegin:dayend],Q[daybegin:dayend],type="l")
}
grid(col = "lightgray", lty = "dotted",
lwd = par("lwd"), equilogs = TRUE)
#choose the day
day<-180
# choose the latitude
phi=(pi/180)*0
S0=1368
t=seq(1,366,length.out=365*288)
daybegin<-day*288
dayend<-(day+1)*288
Q<-solarFlux(S0,phi,t)
plot(t[daybegin:dayend],Q[daybegin:dayend],type="l",ylim=c(0,1400))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
Q<-solarFlux(S0,phi,t)
lines(t[daybegin:dayend],Q[daybegin:dayend],type="l",col=lat/10)
}
grid(col = "lightgray", lty = "dotted",
lwd = par("lwd"), equilogs = TRUE)
#choose the day
day<-1
# choose the latitude
phi=(pi/180)*0
S0=1000
t=seq(1,366,length.out=365*288)
daybegin<-day*288
dayend<-(day+1)*288
Q<-solarFlux(S0,phi,t)
plot(t[daybegin:dayend],Q[daybegin:dayend],type="l",ylim=c(0,1400))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
Q<-solarFlux(S0,phi,t)
lines(t[daybegin:dayend],Q[daybegin:dayend],type="l",col=lat/10)
}
grid(col = "lightgray", lty = "dotted",
lwd = par("lwd"), equilogs = TRUE)
#choose the day
day<-1
# choose the latitude
phi=(pi/180)*0
S0=1000
t=seq(1,366,length.out=365*288)
daybegin<-day*288
dayend<-(day+1)*288
Q<-solarFlux(S0,phi,t)
plot(t[daybegin:dayend],Q[daybegin:dayend],type="l",ylim=c(0,1000))
for (lat in seq(10,60,10)){
phi=(pi/180)*lat
Q<-solarFlux(S0,phi,t)
lines(t[daybegin:dayend],Q[daybegin:dayend],type="l",col=lat/10)
}
grid(col = "lightgray", lty = "dotted",
lwd = par("lwd"), equilogs = TRUE)
library(png)
library(grid)
img <- readPNG("figures/solarZenithAngle.png")
grid.raster(img)
a<-c("a","b")
a
a[1]
a[2]
rep(0,length(a))
length(a)
rep(1,10)
t=seq(1,365,length.out=365*288)
phi=(pi/180)*50
t=seq(1,365,length.out=365*288)
plot(t,180*deltaOdot(t)/pi,typ="l",ylab="delta")
?seq
t=seq(1,365,length.out=365*288)
t
str(t)
head(t)
summary(t)
phi=(pi/180)*50
t=seq(1,365,length.out=365*288)
plot(t,180*deltaOdot(t)/pi,typ="l",ylab="delta",xlab"Day of year")
phi=(pi/180)*50
t=seq(1,365,length.out=365*288)
plot(t,180*deltaOdot(t)/pi,typ="l",ylab="delta",xlab="Day of year")
setwd("H:/Rspace/RE_Community/SolarLab")
library(lubridate)
Cam2001<- read.table("./data/project_label_BSRN_event_label_CAM_2001.tab",sep="\t", header=TRUE,stringsAsFactors=FALSE)
str(Cam2001)
names(Cam2001)<-c("datetime","DIF","LWD","SWD","DIR","ORG")
library(lubridate)
Cam2001<- read.table("./data/project_label_BSRN_event_label_CAM_2001.tab",sep="\t", header=TRUE,stringsAsFactors=FALSE)
str(Cam2001)
source('H:/Rspace/RE_Community/SolarLab/SolarMarkov.R')
str(Cam2001)
Cam2001$Date.Time<-ymd_hms(Cam2001$datetime)
str(Cam2001)
Cam2001$Date.Time<-ymd_hms(Cam2001$datetime)
str(Cam2001)
day<-120
phi=(pi/180)*50
S0=1368
t=seq(1,366,length.out=365*1440)
daybegin<-day*1440
dayend<-(day+7)*1440
Q<-solarFlux(S0,phi,t)
plot(SWD[daybegin:dayend],type="l",ylim=c(0,1500))
lines(Q[daybegin:dayend],type="l",col="blue")
source('H:/Rspace/RE_Community/SolarLab/SolarMarkov.R')
day<-0
phi=(pi/180)*50
S0=1368
t=seq(1,366,length.out=365*1440)
daybegin<-day*1440
dayend<-(day+7)*1440
Q<-solarFlux(S0,phi,t)
plot(SWD[daybegin:dayend],type="l",ylim=c(0,1500))
lines(Q[daybegin:dayend],type="l",col="blue")
day<-180
phi=(pi/180)*50
S0=1368
t=seq(1,366,length.out=365*1440)
daybegin<-day*1440
dayend<-(day+7)*1440
Q<-solarFlux(S0,phi,t)
plot(SWD[daybegin:dayend],type="l",ylim=c(0,1500))
lines(Q[daybegin:dayend],type="l",col="blue")
day<-360
phi=(pi/180)*50
S0=1368
t=seq(1,366,length.out=365*1440)
daybegin<-day*1440
dayend<-(day+7)*1440
Q<-solarFlux(S0,phi,t)
plot(SWD[daybegin:dayend],type="l",ylim=c(0,1500))
lines(Q[daybegin:dayend],type="l",col="blue")
day<-305
phi=(pi/180)*50
S0=1368
t=seq(1,366,length.out=365*1440)
daybegin<-day*1440
dayend<-(day+7)*1440
Q<-solarFlux(S0,phi,t)
plot(SWD[daybegin:dayend],type="l",ylim=c(0,1500))
lines(Q[daybegin:dayend],type="l",col="blue")
summary(Cam2001)
library(lubridate)
Cam2001<- read.table("./data/project_label_BSRN_event_label_CAM_2001.tab",sep="\t", header=TRUE,stringsAsFactors=FALSE)
str(Cam2001)
names(Cam2001)<-c("datetime","DIF","LWD","SWD","DIR","ORG")
# convert time to POSIXct
Cam2001$Date.Time<-ymd_hm(Cam2001$datetime)
attach(Cam2001)
Npoint<-7*1440
plot(SWD[1:Npoint],type="l")
# convert time to POSIXct
Cam2001$Date.Time<-ymd_hms(Cam2001$datetime)
attach(Cam2001)
Npoint<-7*1440
plot(SWD[1:Npoint],type="l")
library(lubridate)
Cam2001<- read.table("./data/project_label_BSRN_event_label_CAM_2001.tab",sep="\t", header=TRUE,stringsAsFactors=FALSE)
str(Cam2001)
names(Cam2001)<-c("datetime","DIF","LWD","SWD","DIR","ORG")
# convert time to POSIXct
Cam2001$Date.Time<-ymd_hms(Cam2001$datetime)
attach(Cam2001)
Npoint<-7*1440
plot(SWD[1:Npoint],type="l")
rm(list=ls())
library(lubridate)
Cam2001<- read.table("./data/project_label_BSRN_event_label_CAM_2001.tab",sep="\t", header=TRUE,stringsAsFactors=FALSE)
str(Cam2001)
names(Cam2001)<-c("datetime","DIF","LWD","SWD","DIR","ORG")
# convert time to POSIXct
Cam2001$Date.Time<-ymd_hm(Cam2001$datetime)
attach(Cam2001)
Npoint<-7*1440
plot(SWD[1:Npoint],type="l")
rm(list=ls())
library(lubridate)
Cam2001<- read.table("./data/project_label_BSRN_event_label_CAM_2001.tab",sep="\t", header=TRUE,stringsAsFactors=FALSE)
str(Cam2001)
names(Cam2001)<-c("datetime","DIF","LWD","SWD","DIR","ORG")
# convert time to POSIXct
Cam2001$Date.Time<-ymd_hms(Cam2001$datetime)
attach(Cam2001)
Npoint<-7*1440
plot(SWD[1:Npoint],type="l")
setwd("H:/Rspace/RE_Community")
## Callywith wind analysis
library(dplyr)
library(ggplot2)
library(tidyr)
library(lubridate)
## read in data
dat.wide<-read.csv("callywith3year.csv",stringsAsFactors=FALSE)
# convert time to POSIXct
dat.wide$Timestamp<-dmy_hm(dat.wide$Timestamp)
#tidy the data
cw<-gather(dat.wide,height,V,V46:V20,-Dir)
rm(dat.wide)
cw46<-filter(cw,height=="V46")
cw32<-filter(cw,height=="V32")
cw20<-filter(cw,height=="V20")
str(cw46)
