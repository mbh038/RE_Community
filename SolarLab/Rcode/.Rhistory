pts=seq(1,nrow(dem))
str(dem)
odds<-seq(1,nrow(dem),2)
str(odds)
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
# read in demand files
demfilepathstem<-"../data/profiles/EESP/"
demfilepathtail<-"DomesticDemand.csv"
demMonths<-c("jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec")
mdem<-data.frame()
dem<-numeric()
for (month in demMonths){
demfilename<-paste0(demfilepathstem,month,demfilepathtail)
#print(demfilename)
mdem<-read.table(demfilename,stringsAsFactors=FALSE,sep=",",header=FALSE)
mday=nrow(mdem[!is.na(mdem[,3]),])/(24*12)
#print (mday)
dem<-c(dem,mdem[!is.na(mdem[,3]),][,3])
#print(length(dem))
}
pts=seq(1,nrow(dem))
odds<-seq(1,nrow(dem),2)
dem<-cbind(pts,dem)
pts=seq(1,nrow(dem))
rm(list=ls())
pts=seq(1,nrow(dem))
# read in demand files
demfilepathstem<-"../data/profiles/EESP/"
demfilepathtail<-"DomesticDemand.csv"
demMonths<-c("jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec")
mdem<-data.frame()
dem<-numeric()
for (month in demMonths){
demfilename<-paste0(demfilepathstem,month,demfilepathtail)
#print(demfilename)
mdem<-read.table(demfilename,stringsAsFactors=FALSE,sep=",",header=FALSE)
mday=nrow(mdem[!is.na(mdem[,3]),])/(24*12)
#print (mday)
dem<-c(dem,mdem[!is.na(mdem[,3]),][,3])
#print(length(dem))
}
pts=seq(1,nrow(dem))
?seq
nrow(dem)
length(dem)
rm(list=ls())
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
head(dem)
rm(list=ls())
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
str(dem10)
total=sum(dem10)/6000
total
max(dem)
dem10<-which(dem %in% seq(1,length(dem),2))
str(dem10)
str(dem[which(dem %in% seq(2,length(dem),2)),2])
str(dem[which(dem %in% seq(1,length(dem),2)),2])
dem %in% seq(1,length(dem),2)
which(dem %in% seq(1,length(dem),2)
)
dem[which(dem %in% seq(1,length(dem),2)),2]
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
rm(list=ls())
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
# read in demand files
demfilepathstem<-"../data/profiles/EESP/"
demfilepathtail<-"DomesticDemand.csv"
demMonths<-c("jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec")
mdem<-data.frame()
dem<-numeric()
for (month in demMonths){
demfilename<-paste0(demfilepathstem,month,demfilepathtail)
#print(demfilename)
mdem<-read.table(demfilename,stringsAsFactors=FALSE,sep=",",header=FALSE)
mday=nrow(mdem[!is.na(mdem[,3]),])/(24*12)
#print (mday)
dem<-c(dem,mdem[!is.na(mdem[,3]),][,3])
#print(length(dem))
}
pts=seq(1,length(dem))
odds<-seq(1,length(dem),2)
dem<-cbind(pts,dem)
nrow(dem)
count=0
dem10<-numeric()
dem10<-dem[which(dem %in% seq(2,nrow(dem),2)),2]+ dem[which(dem %in% seq(1,nrow(dem),2)),2]
str(dem[which(dem %in% seq(1,nrow(dem),2)),2])
nrow(dem)
str(dem)
head(dem)
head(dem[,2])
summary(which(dem %in% seq(1,nrow(dem),2)))
length(odds)
length(which(dem %in% seq(1,nrow(dem),2)))
length(seq(1,nrow(dem),2)))
length(seq(1,nrow(dem),2))
head(seq(1,nrow(dem),2))
length(which(dem[,1] %in% seq(1,nrow(dem),2)))
mdem<-data.frame()
dem<-numeric()
for (month in demMonths){
demfilename<-paste0(demfilepathstem,month,demfilepathtail)
#print(demfilename)
mdem<-read.table(demfilename,stringsAsFactors=FALSE,sep=",",header=FALSE)
mday=nrow(mdem[!is.na(mdem[,3]),])/(24*12)
#print (mday)
dem<-c(dem,mdem[!is.na(mdem[,3]),][,3])
#print(length(dem))
}
pts=seq(1,length(dem))
odds<-seq(1,length(dem),2)
dem<-cbind(pts,dem)
count=0
dem10<-numeric()
dem10<-dem[which(dem[,1] %in% seq(2,nrow(dem),2)),2]+ dem[which(dem[,1] %in% seq(1,nrow(dem),2)),2]
dem10<-(dem[which(dem[,1] %in% seq(2,nrow(dem),2)),2]+ dem[which(dem[,1] %in% seq(1,nrow(dem),2)),2])/2
for (i in odds ){
count=count+1
dem102[count]<-(dem[i,2]+dem[i+1,2])/2
}
dem102<-numeric()
for (i in odds ){
count=count+1
dem102[count]<-(dem[i,2]+dem[i+1,2])/2
}
identical(dem10,dem102)
nrow(dem10)
length(dem10)
length(dem102)
tail(dem10)
tail(dem102)
head(dem10)
head(dem102)
length(dem[which(dem[,1] %in% seq(2,nrow(dem),2)),2])
length(dem[which(dem[,1] %in% seq(1,nrow(dem),2)),2]))
length(dem[which(dem[,1] %in% seq(1,nrow(dem),2)),2])
head(dem)
rm(list=ls())
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
a<-c(10,20,30,40,50,60)
which(a %in% c(1,3,5))
dem10<-(dem[which(dem[,1] %in% seq(2,nrow(dem),2)),2]+ dem[which(dem[,1] %in% seq(1,nrow(dem),2)),2])/2
# read in demand files
demfilepathstem<-"../data/profiles/EESP/"
demfilepathtail<-"DomesticDemand.csv"
demMonths<-c("jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec")
mdem<-data.frame()
dem<-numeric()
for (month in demMonths){
demfilename<-paste0(demfilepathstem,month,demfilepathtail)
#print(demfilename)
mdem<-read.table(demfilename,stringsAsFactors=FALSE,sep=",",header=FALSE)
mday=nrow(mdem[!is.na(mdem[,3]),])/(24*12)
#print (mday)
dem<-c(dem,mdem[!is.na(mdem[,3]),][,3])
#print(length(dem))
}
pts=seq(1,length(dem))
#odds<-seq(1,length(dem),2)
dem102<-numeric()
dem102<-(dem[c(TRUE,FALSE)]+dem[c(FALSE,TRUE))]/2
dem102<-(dem[c(TRUE,FALSE)]+dem[c(FALSE,TRUE)])/2
head(dem102)
rm(list=ls())
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
rm(list=ls())
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
rm(list=ls())
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
rm(list=ls(-dem10))
rm(list=ls()[-dem10])
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
ls()
rm(list=ls()[-"dem10"])
class(ls())
ls[1]
ls()[1]
which(ls() != "demo10")
which(ls() !%in% "demo10")
!which(ls() %in% "demo10")
ls()
ls()[2]
ls()[!="demo10"]
ls()[ls()!="demo10"]
ls()[ls()!="dem10"]
rm(list=ls())
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
plot(dem10)
plot(dem10[1:288])
lines(dem[25000:25288],col="red")
lines(dem10[25000:25288],col="red")
pts<-seq(1,length(dem10))
day<-pts %/% 144
table(day)
head(pts)
day<-pts-1 %/% 144
table(day)
day<-(pts-1) %/% 144
table(day)
day<-(pts-1) %/% 144 + 1
table(day)
minute<-pts[seq(1,144)]
table(minute)
minute<-rep(seq(1,144),365)
table(minute)
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
?write.table
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
str(dem5)
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
str(dem5)
str(mdem)
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
# EESP demand file names
demfilepathstem<-"../data/profiles/EESP/"
demfilepathtail<-"DomesticDemand.csv"
demMonths<-c("jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec")
mdem<-data.frame()
dem5<-data.frame()
# loop over monthly 5 minute EESP demand files
for (month in demMonths){
demfilename<-paste0(demfilepathstem,month,demfilepathtail)
#print(demfilename)
mdem<-read.table(demfilename,stringsAsFactors=FALSE,sep=",",header=FALSE)
mday=nrow(mdem[!is.na(mdem[,3]),])/(24*12)
#print (mday)
dem5<-rbind(dem5,mdem[!is.na(mdem[,3]),][,2:3])
#print(length(dem))
}
# make 10 minute file for whole year
dem10<-numeric()
dem10<-(dem5[c(TRUE,FALSE),]+dem5[c(FALSE,TRUE),])/2
pts<-seq(1,nrow(dem10))
minute<-rep(seq(1,144),365)
day<-(pts-1) %/% 144 + 1
domDem10<-data.frame(pts,day,minute,dem10)
names(domDem10)=c("id","day","minute10","wd","W")
# write to profiles folder
write.csv(domDem10,"../data/profiles/EESP/domDem10.csv",row.names=FALSE)
head(domDem10)
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
table(dem5$V2)
dem5[,2][c(TRUE,FALSE)]
str(dem5[,2][c(TRUE,FALSE)])
wds<-dem5[,1][c(TRUE,FALSE)]
head(wds,20)
table(wds)
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
source('H:/Rspace/RE_Community/SolarLab/Rcode/demand.r')
winterwd<-domDem10[domDem10$day==1,]
plot(winterwd,lt="l",col="blue")
plot(winterwd,lty="l",col="blue")
plot(winterwd,type="l",col="blue")
plot(winterwd$W,type="l",col="blue")
summary(winterwd)
summerwd<-domDem10[domDem10$day==180,]
lines(summerwd$w,col="red")
summary(summerwd)
winterwd<-domDem10[domDem10$day==1,]
summerwd<-domDem10[domDem10$day==180,]
plot(winterwd$minute10,winterwd$W,type="l",col="blue")
lines(summerwd$minute10,summerwd$w,col="red")
lines(summerwd$minute10,summerwd$W,col="red")
winterwe<-domDem10[domDem10$day==4,]
winterwd<-domDem10[domDem10$day==1,]
summerwe<-domDem10[domDem10$day==183,]
summerwd<-domDem10[domDem10$day==180,]
plot(winterwd$minute10,winterwd$W,type="l",col="blue")
lines(summerwd$minute10,summerwd$W,col="red")
plot(winterwe$minute10,winterwe$W,type="l",col="blue")
lines(summerwe$minute10,summerwe$W,col="red")
library(rafalib)
mypar(2,1)
plot(winterwd$minute10,winterwd$W,type="l",col="blue")
lines(summerwd$minute10,summerwd$W,col="red")
legend(c("Winter","Summer"))
main("Weekday domestic demand")
plot(winterwe$minute10,winterwe$W,type="l",col="blue")
main("Weekend domestic demand")
lines(summerwe$minute10,summerwe$W,col="red")
install.packages("rafalib")
library(rafalib)
mypar(2,1)
plot(winterwd$minute10,winterwd$W,type="l",col="blue")
lines(summerwd$minute10,summerwd$W,col="red")
legend(c("Winter","Summer"))
main("Weekday domestic demand")
plot(winterwe$minute10,winterwe$W,type="l",col="blue")
main("Weekend domestic demand")
lines(summerwe$minute10,summerwe$W,col="red")
library(rafalib)
mypar(2,1)
plot(winterwd$minute10,winterwd$W,type="l",col="blue")
lines(summerwd$minute10,summerwd$W,col="red")
legend(c("Winter","Summer"))
main="Weekday domestic demand"
plot(winterwe$minute10,winterwe$W,type="l",col="blue")
main="Weekend domestic demand"
lines(summerwe$minute10,summerwe$W,col="red")
library(rafalib)
mypar(2,1)
plot(winterwd$minute10,winterwd$W,type="l",col="blue",main="Weekday domestic demand")
lines(summerwd$minute10,summerwd$W,col="red")
plot(winterwe$minute10,winterwe$W,type="l",col="blue",main="Weekend domestic demand")
main="Weekend domestic demand"
lines(summerwe$minute10,summerwe$W,col="red")
library(rafalib)
mypar(2,1)
plot(winterwd$minute10/60,winterwd$W,type="l",col="blue",xlab="t (hour)",main="Weekday domestic demand")
lines(summerwd$minute10/60,summerwd$W,col="red")
plot(winterwe$minute10/60,winterwe$W,type="l",col="blue",xlab="t (hour)", main="Weekend domestic demand")
main="Weekend domestic demand"
lines(summerwe$minute10/60,summerwe$W,col="red")
library(rafalib)
mypar(2,1)
plot(winterwd$minute10/12,winterwd$W,type="l",col="blue",xlab="t (hour)",main="Weekday domestic demand")
lines(summerwd$minute10/12,summerwd$W,col="red")
plot(winterwe$minute10/12,winterwe$W,type="l",col="blue",xlab="t (hour)", main="Weekend domestic demand")
main="Weekend domestic demand"
lines(summerwe$minute10/12,summerwe$W,col="red")
library(rafalib)
mypar(2,1)
plot(winterwd$minute10/12,winterwd$W,type="l",col="blue",ylim=c(0,800),xlab="t (hour)",main="Weekday domestic demand")
lines(summerwd$minute10/12,summerwd$W,col="red")
plot(winterwe$minute10/12,winterwe$W,type="l",col="blue",ylim=c(0,800),xlab="t (hour)", main="Weekend domestic demand")
main="Weekend domestic demand"
lines(summerwe$minute10/12,summerwe$W,col="red")
library(rafalib)
mypar(2,1)
plot(winterwd$minute10/12,winterwd$W,type="l",col="blue",ylim=c(0,800),xlab="t (hour)",ylab="Demand (W)",main="Weekday domestic demand")
lines(summerwd$minute10/12,summerwd$W,col="red")
plot(winterwe$minute10/12,winterwe$W,type="l",col="blue",ylim=c(0,800),xlab="t (hour)",ylab="Demand (W)", main="Weekend domestic demand")
main="Weekend domestic demand"
lines(summerwe$minute10/12,summerwe$W,col="red")
sum(domDem10$W/nrow(domDem10))
max(domDem10$W)
max(domDem10$W) / sum(domDem10$W/nrow(domDem10))
ddata<-red.csv("./data/profiles/EPSS/domDem10.csv")
ddata<-read.csv("./data/profiles/EPSS/domDem10.csv")
ddata<-read.csv("../data/profiles/EPSS/domDem10.csv")
ddata<-read.csv("../data/profiles/EESP/domDem10.csv")
library(rafalib)
mypar(2,1)
plot(winterwd$minute10/6,winterwd$W,type="l",col="blue",ylim=c(0,800),xlab="t (hour)",ylab="Demand (W)",main="Weekday domestic demand")
lines(summerwd$minute10/6,summerwd$W,col="red")
plot(winterwe$minute10/6,winterwe$W,type="l",col="blue",ylim=c(0,800),xlab="t (hour)",ylab="Demand (W)", main="Weekend domestic demand")
main="Weekend domestic demand"
lines(summerwe$minute10/6,summerwe$W,col="red")
ddata<-read.csv("../data/profiles/EESP/domDem10.csv")
ddata$W<-houses*ddata$W
houses=18000
ddata$W<-houses*ddata$W
# EnergySim
windMW<-30
windPower<-read.csv("../data/specs/windPowerCurve.csv")
solarMW<-30
# read in demand files
houses=18000
ddata<-read.csv("../data/profiles/EESP/domDem10.csv")
ddata$W<-houses*ddata$W
sipfilepathstem<-"../data/synthetic/CamBSRN_Solar10minSyn/CamSolarSyn10min"
wipfilepathstem<-"../data/synthetic/CallywithWind10minSyn/Cally"
sipfilepathtail<-".csv"
wipfilepathtail<-"_10min.csv"
# set up input file numbers
ipfilename<-function(file,ipfilepathstem,ipfilepathtail){
ipfilehandle<-as.character(file)
if (file < 10){
ipfilehandle<-paste0("00",ipfilehandle)
}
if (file >= 10 && file < 100){
ipfilehandle<-paste0("0",ipfilehandle)
}
ipfilename<-paste0(ipfilepathstem,ipfilehandle,ipfilepathtail)
}
wfile<-floor(100*runif(1)+1)
sfile<-floor(100*runif(1)+1)
print(paste("Solar file:",sfile,", Wind file: ",wfile,sep=" "))
wfilename<-ipfilename(wfile,wipfilepathstem,wipfilepathtail)
sfilename<-ipfilename(sfile,sipfilepathstem,sipfilepathtail)
wdata<-read.csv(wfilename)
sdata<-read.csv(sfilename)
data<-data.frame(wdata[,1],wdata[,2],sdata[,2])
data$day<-min(365,data$t %/% 144 +1)
names(data)<-c("t","w","s")
hist(data$w)
solarop<-numeric(length=length(data))
windop<-numeric(length=length(data))
for (i in 1:nrow(data)){
windop[i]<-ifelse(data$w[i]>3,windMW*windPower[which(windPower$v==data$w[i]),2],0)
solarop[i]<-solarMW*(data$s[i]/1000)
}
totalop<-windop+solarop
balance<-totalop-ddata$W
energyop<-data.frame(windop,solarop,totalop,balance)
hist(balance)
hist(ddata$W)
hist(balance)
windMW<-60
windPower<-read.csv("../data/specs/windPowerCurve.csv")
solarMW<-60
# read in demand files
houses=18000
ddata<-read.csv("../data/profiles/EESP/domDem10.csv")
ddata$W<-houses*ddata$W
sipfilepathstem<-"../data/synthetic/CamBSRN_Solar10minSyn/CamSolarSyn10min"
wipfilepathstem<-"../data/synthetic/CallywithWind10minSyn/Cally"
sipfilepathtail<-".csv"
wipfilepathtail<-"_10min.csv"
# set up input file numbers
ipfilename<-function(file,ipfilepathstem,ipfilepathtail){
ipfilehandle<-as.character(file)
if (file < 10){
ipfilehandle<-paste0("00",ipfilehandle)
}
if (file >= 10 && file < 100){
ipfilehandle<-paste0("0",ipfilehandle)
}
ipfilename<-paste0(ipfilepathstem,ipfilehandle,ipfilepathtail)
}
wfile<-floor(100*runif(1)+1)
sfile<-floor(100*runif(1)+1)
print(paste("Solar file:",sfile,", Wind file: ",wfile,sep=" "))
wfilename<-ipfilename(wfile,wipfilepathstem,wipfilepathtail)
sfilename<-ipfilename(sfile,sipfilepathstem,sipfilepathtail)
wdata<-read.csv(wfilename)
sdata<-read.csv(sfilename)
data<-data.frame(wdata[,1],wdata[,2],sdata[,2])
data$day<-min(365,data$t %/% 144 +1)
names(data)<-c("t","w","s")
hist(data$w)
solarop<-numeric(length=length(data))
windop<-numeric(length=length(data))
for (i in 1:nrow(data)){
windop[i]<-ifelse(data$w[i]>3,windMW*windPower[which(windPower$v==data$w[i]),2],0)
solarop[i]<-solarMW*(data$s[i]/1000)
}
totalop<-windop+solarop
balance<-totalop-ddata$W
energyop<-data.frame(windop,solarop,totalop,balance)
plot(energyop$totalop[1:1000],type="l")
plot(energyop$totalop[25000:26000],type="l")
hist(energyop$totalop)
summary(energyop)
hist(ddata$W)
hist(balance)
windMW<-160
windPower<-read.csv("../data/specs/windPowerCurve.csv")
solarMW<-160
# read in demand files
houses=18000
ddata<-read.csv("../data/profiles/EESP/domDem10.csv")
ddata$W<-houses*ddata$W
sipfilepathstem<-"../data/synthetic/CamBSRN_Solar10minSyn/CamSolarSyn10min"
wipfilepathstem<-"../data/synthetic/CallywithWind10minSyn/Cally"
sipfilepathtail<-".csv"
wipfilepathtail<-"_10min.csv"
# set up input file numbers
ipfilename<-function(file,ipfilepathstem,ipfilepathtail){
ipfilehandle<-as.character(file)
if (file < 10){
ipfilehandle<-paste0("00",ipfilehandle)
}
if (file >= 10 && file < 100){
ipfilehandle<-paste0("0",ipfilehandle)
}
ipfilename<-paste0(ipfilepathstem,ipfilehandle,ipfilepathtail)
}
wfile<-floor(100*runif(1)+1)
sfile<-floor(100*runif(1)+1)
print(paste("Solar file:",sfile,", Wind file: ",wfile,sep=" "))
wfilename<-ipfilename(wfile,wipfilepathstem,wipfilepathtail)
sfilename<-ipfilename(sfile,sipfilepathstem,sipfilepathtail)
wdata<-read.csv(wfilename)
sdata<-read.csv(sfilename)
data<-data.frame(wdata[,1],wdata[,2],sdata[,2])
data$day<-min(365,data$t %/% 144 +1)
names(data)<-c("t","w","s")
hist(data$w)
solarop<-numeric(length=length(data))
windop<-numeric(length=length(data))
for (i in 1:nrow(data)){
windop[i]<-ifelse(data$w[i]>3,windMW*windPower[which(windPower$v==data$w[i]),2],0)
solarop[i]<-solarMW*(data$s[i]/1000)
}
totalop<-windop+solarop
balance<-totalop-ddata$W
energyop<-data.frame(windop,solarop,totalop,balance)
plot(energyop$totalop[1:1000],type="l")
plot(energyop$totalop[25000:26000],type="l")
hist(energyop$totalop)
summary(energyop)
hist(ddata$W)
hist(balance)
